importScripts("libs.js");var EM={buffer:void 0,length:0,setup:Module.cwrap("setup","void",["number","number"]),append:Module.cwrap("append","void",["number"]),cleanup:Module.cwrap("cleanup","string",[])};self.addEventListener("message",function(e){var t=e.data;if(t instanceof ImageData)EM.buffer.set(new Uint8Array(t.data.buffer)),EM.append(EM.buffer.byteOffset),self.postMessage({type:"append"});else if("[object Object]"===Object.prototype.toString.call(t)){if(t.type)switch(t.type){case"setup":var a=+t.wide,s=+t.high,p=+t.duration;EM.length=a*s<<2,EM.buffer=new Uint8Array(Module.HEAPU8.buffer,Module._malloc(EM.length),EM.length),EM.setup(a,s,p),self.postMessage({type:"append"});break;case"cleanup":self.postMessage(EM.cleanup());break;default:self.postMessage({type:"error"})}}else self.postMessage({type:typeof t})},!1);